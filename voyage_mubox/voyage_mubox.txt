1. Configuration file

	nano /boot/config.txt
		#arm_freq=1000 #1000 or 750 or 500
		#core_freq=250
		#sdram_freq=400
		gpu_mem=16
		disable_splash=1
		#force_turbo=1
		#disable_l2cache=1
		disable_pvt=1
	cat /proc/cpuinfo
	cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq
	dmidecode --type memory

2. Kernel option

	nano /boot/cmdline.txt
		#maxcpus=2
		dwc_otg.fiq_split_enable=0 (?)
		apm=off noapic consoleblank=0 noswap
		#kgdboc=ttyAMA0,115200

3. Update & upgrade

	remountrw
	apt-get update
	apt-get upgrade
	apt-get dist-upgrade
	apt-get install ca-certificates curl (rpi-update)
	rpi-update
	sync
	reboot

4. Localisation

	remountrw
	apt-get install apt-utils fbterm unifont (locales)
	dpkg-reconfigure locales
	nano ~/.fbterm
		font-names=unifont
		font-size=16 or 24
	apt-get install --reinstall tzdata
	dpkg-reconfigure tzdata
	sync
	
5. Startup scripts

	/etc/rc.local # attached

6. Remove TTY2~6

	nano /etc/inittab
		disable #tty2-6 and 1(?)
	
7. Static IP

	nano /etc/network/interfaces
	auto  eth0
	#iface eth0 inet dhcp
	iface eth0 inet static
	address 	192.168.0.3
	netmask 	255.255.255.0
	broadcast 	192.168.0.255
	network 	192.168.0.0
	gateway 	192.168.0.1 
	dns-nameservers 168.126.63.1
	
8. Disable modules

	lsmod
	nano /etc/modprobe.d/raspi-blacklist.conf
		blacklist ipv6
		blacklist uio
		blacklist uio-pdrv-genirq
		blacklist joydev
		blacklist evdev
		
9. Disable IPv6

	nano /etc/modprobe.d/blacklist
		blacklist ipv6
	nano /etc/rc.local
		#sysctl -w net.ipv6.conf.all.disable_ipv6=1

10. Disable services

	apt-get install sysv-rc-conf
	sysv-rc-conf
		avahi-daemon	  2 3 4 5 
		cron		  2 3 4 5
		dbus		  2 3 4 5
		dnsmasq		  2 3 4 5
		hostapd		  2 3 4 5
		inetutils-syslogd 
		lirc		  2 3 4 5
		nginx		  2 3 4 5
		php-fastcgi	  2 3 4 5
		sshd		  2 3 4 5
		watchdog	  2 3 4 5
		wd_keepalive	  2 3 4 5
	
11. ALSA configuration

	mv /usr/share/alsa/alsa.conf /usr/share/alsa/alsa.conf.org
	nano /usr/share/alsa/alsa.conf
		pcm.sound.type hw
		pcm.sound.card 0
		pcm.sound.device 0
		pcm.sound.subdevice 0
		pcm.sound.sync_ptr_ioctl 0
		pcm.sound.nonblock 0

		ctl.sound.type hw
		ctl.sound.card 0

		#pcm.default pcm.sound
		#ctl.default ctl.sound

		defaults.pcm.nonblock 0
		defaults.pcm.compat 1
		defaults.pcm.minperiodtime 1000
	nano /etc/modprobe.d/alsa-base.conf
		Comment out optional modules
	sysv-rc-conf
		alsa-utils	  2 3 4 5 S
	
12. Compile MPD

	wget http://www.musicpd.org/download/mpd/0.17/mpd-0.17.6.tar.xz
	tar xvf mpd-0.17.6.tar.xz
	cd mpd-0.17.6
	#export CFLAGS="-march=native -O2"
	export CFLAGS="-O0"
	export CXXFLAGS="-O0"
	export CPPFLAGS="-O0"
	apt-get install git autoconf automake build-essential
	apt-get install libglib2.0-dev libcue-dev libcurl4-gnutls-dev libaudiofile-dev libasound2-dev libflac-dev libmad0-dev libid3tag0-dev libavformat-dev libsndfile1-dev libmpdclient-dev libmpg123-dev (libboost-dev)
	./autogen.sh
	./configure --help
	./configure --disable-aac --enable-alsa --disable-ao --enable-audiofile --disable-bzip2 --disable-cdio-paranoia --enable-curl --disable-debug --disable-despotify --disable-documentation --disable-ffado --enable-ffmpeg --disable-fifo --enable-flac --disable-fluidsynth --disable-gme --disable-httpd-output --enable-id3 --disable-inotify --disable-ipv6 --disable-iso9660 --disable-jack --disable-largefile --disable-lastfm --disable-lame-encoder --disable-libwrap --disable-lsr --disable-mad --disable-mikmod --disable-mms --disable-modplug --disable-mpc --enable-mpg123 --disable-mvp --disable-openal --disable-oss --disable-pipe-output --disable-pulse --disable-recorder-output --disable-roar --disable-sidplay --disable-shout --enable-sndfile --disable-solaris-output --disable-soundcloud --disable-soup --disable-sqlite --disable-systemd-daemon --enable-tcp --disable-test --disable-twolame-encoder --disable-un --disable-vorbis --disable-vorbis-encoder --disable-wave-encoder --disable-wavpack --disable-werror --disable-wildmidi --disable-zzip --with-zeroconf=no
	make
	make install
	/usr/local/bin/mpd -V
	#strip --strip-unneeded /usr/local/bin/mpd
	/etc/init.d/mpd stop
	mv /usr/bin/mpd /usr/bin/mpd.org && cp /usr/local/bin/mpd /usr/bin
	/etc/init.d/mpd start
	ls -al /usr/bin/mpd*
	
13. MPD configuration

	/etc/mpd.conf # attached

14. CIFS mounting

	nano /etc/fstab
		//192.168.0.9/intel_520 /mnt/Music cifs guest,ro,rsize=8192,iocharset=utf8 0 0
	or
	nano /etc/rc.local
	mount -t cifs //192.168.0.9/intel_520 /mnt/Music -o pass="",ro,rsize=8192,iocharset=utf8

15. MPD ionice & taskset

	nano /etc/init.d/mpd
		MPD_PID=`pgrep -n $NAME`

		MPD_PIDS=`chrt -ap "$MPD_PID" | awk 'NR %2 == 0 {printf "%i\n",$2}'`

		   MAIN_PID=`echo "$MPD_PIDS" | awk 'NR == 1 {print}'`
		 UPDATE_PID=`echo "$MPD_PIDS" | awk 'NR == 2 {print}'`
		 PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 3 {print}'`
		DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 4 {print}'`
		 OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 5 {print}'`

		#ionice -c 2 -n 5 -p "$MAIN_PID"
		#ionice -c 2 -n 7 -p "$UPDATE_PID"
		#ionice -c 2 -n 4 -p "$PLAYER_PID"
		#ionice -c 2 -n 6 -p "$DECODER_PID"
		#ionice -c 2 -n 3 -p "$OUTPUT_PID"

		chrt    -apo 0 "$MPD_PID"
		taskset -apc 3 "$MPD_PID"
		
16. Ramfs
	nano /etc/fstab
		ramfs /tmp ramfs nosuid,nodev 0 0

17. Documentation
	https://github.com/raspberrypi/documentation

cf) raspi-config
	apt-get install raspi-config
	advanced options
