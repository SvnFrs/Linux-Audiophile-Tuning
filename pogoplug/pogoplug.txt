The latest U-Boot Bootloader
U-Boot 2016.05-tld-1 (Jun 12 2016 â€¦.)
http://forum.doozan.com/read.php?3,12381

Linux Kernel 4.10.0 Kirkwood package and Debian rootfs
http://forum.doozan.com/read.php?2,12096
Debian 4.4.0 kirkwood rootfs
Debian-4.4.0-kirkwood-tld-1-rootfs-bodhi.tar.bz2

1. USB Install

$ sudo gparted (a single ext2 partition with 'rootfs' label)
$ sudo apt-get install u-boot-tools
$ sudo su
# fdisk -l
# cd /media/parkmino/rootfs
# tar -xjf '/home/parkmino/Downloads/Debian-4.4.0-kirkwood-tld-1-rootfs-bodhi.tar.bz2'
# nano /media/parkmino/rootfs/etc/fstab
	/dev/root / ext2  noatime,errors=remount-ro 0 1
# cd boot
# cp -a zImage-4.4.0-kirkwood-tld-1  zImage.fdt
# cat dts/kirkwood-pogo_e02.dtb >> zImage.fdt
# mv uImage uImage.orig
# mkimage -A arm -O linux -T kernel -C none -a 0x00008000 -e 0x00008000 -n Linux-4.4.0-kirkwood-tld-1 -d zImage.fdt  uImage
# sync

# cp -a zImage-4.4.0-kirkwood-tld-1  zImage.fdt
# cat dts/kirkwood-pogoplug_v4.dtb >> zImage.fdt
# mkimage -A arm -O linux -T kernel -C none -a 0x00008000 -e 0x00008000 -n Linux-4.4.0-kirkwood-tld-1 -d zImage.fdt  uImage.v4
# sync

# exit

2. USB Boot

$ ssh root@192.168.0.x (password: root)
# rm /etc/ssh/ssh_host*
# ssh-keygen -A
# apt-get update
# apt-get upgrade		# !!! Not for ext2 but only for ext3
# apt-get dist-upgrade
# apt-get autoremove
# apt-get clean
# date
# dpkg-reconfigure tzdata
# date
# lsmod
# nano /etc/modprobe.d/blacklist

3. ALSA & MPD

# apt-get install alsa-base alsa-utils mpd mpc ncmpc ca-certificates psmisc # cifs-utils
# mv /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-ac97.so /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-ac97.so.sav
# mv /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-sbase.so /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-sbase.so.sav
# mv /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-hda.so /usr/lib/arm-linux-gnueabi/alsa-lib/smixer/smixer-hda.so.sav
# mv /usr/share/alsa /usr/share/alsa.org
# mkdir /usr/share/alsa
# nano /usr/share/alsa/alsa.conf
	pcm.sound.type hw
	pcm.sound.card 0
	pcm.sound.device 0
	pcm.sound.subdevice 0

	ctl.control.type hw
	ctl.control.card 0
# nano /lib/modprobe.d/aliases.conf
	#options snd-usb-audio index=-2
# truncate -s 0 /etc/mpd.conf
# nano /etc/mpd.conf
# nano /var/lib/mpd/playlists/Internet_Radios.m3u

https://packages.debian.org/search?keywords=mpd

4. Upmpdcli Build

# apt-get install autoconf automake build-essential libtool pkg-config
# apt-get install libupnp6-dev libexpat1-dev libmpdclient-dev libcurl4-gnutls-dev libmicrohttpd-dev libjsoncpp-dev
# cd
# wget https://www.lesbonscomptes.com/upmpdcli/downloads/libupnpp-0.15.1.tar.gz
# tar -xvf libupnpp-0.15.1.tar.gz
# cd libupnpp-0.15.1
# ./configure
# make
# make install
# cd
# wget https://www.lesbonscomptes.com/upmpdcli/downloads/upmpdcli-1.2.12.tar.gz
# tar -xvf upmpdcli-1.2.12.tar.gz
# cd upmpdcli-1.2.12
# ./configure
# make
# make install
# adduser upmpdcli
# cp ~/icon.png /usr/local/share/upmpdcli/
# cd
# nano /usr/local/etc/upmpdcli.conf
	checkcontentformat = 0

5. Remove Services

# nano /etc/inittab
	#... ttyS0
# apt-get install sysv-rc-conf
# sysv-rc-conf
	Remove alsa-utils(S) avahi-daemon(2-3-4-5) busybox-klogd(2-3-4-5) busybox-syslogd(2-3-4-5) mpd(2-3-4-5)

6. Fstab

# nano /etc/fstab
# mkdir /mnt/usb01 /mnt/usb02 /mnt/pc01 /mnt/pc02 /mnt/nas01 /mnt/nas02
# ln -s /mnt /var/lib/mpd/music

7. Rc.local

# nano /etc/rc.local

8. Sysctl.conf

# nano /etc/sysctl.conf

9. USB Auto Mount

https://www.axllent.org/docs/view/auto-mounting-usb-storage/
http://kissmyarch.blogspot.kr/2011/10/usb-automount.html

# nano /lib/udev/rules.d/11-my-media-automount.rules

10. Image Build

# echo "* Mino's UPnP Audio Renderer for Pogoplug E02 17.05" > ~/release
# nano ~/release
# mpc clear
# rm -f ~/.bash_history ; history -c
# poweroff

$ sudo fdisk -l
$ sudo dd bs=4M if=/dev/sdb of=pogo_e02_audio_renderer_17.05.img
$ zip pogo_e02_audio_renderer_17.05.zip pogo_e02_audio_renderer_17.05.img

$ sudo mv /media/parkmino/rootfs/boot/uImage /media/parkmino/rootfs/boot/uImage.e02
$ sudo mv /media/parkmino/rootfs/boot/uImage.v4 /media/parkmino/rootfs/boot/uImage
$ ls -al /media/parkmino/rootfs/boot
$ sudo dd bs=4M if=/dev/sdb of=pogo_v4_audio_renderer_17.05.img
$ zip pogo_v4_audio_renderer_17.05.zip pogo_v4_audio_renderer_17.05.img

$ sudo mv /media/parkmino/rootfs/boot/uImage /media/parkmino/rootfs/boot/uImage.v4
$ sudo mv /media/parkmino/rootfs/boot/uImage.orig /media/parkmino/rootfs/boot/uImage
$ ls -al /media/parkmino/rootfs/boot
$ sudo dd bs=4M if=/dev/sdb of=kirkwood_audio_renderer_17.05.img
$ zip kirkwood_audio_renderer_17.05.zip kirkwood_audio_renderer_17.05.img

$ sudo mv /media/parkmino/rootfs/boot/uImage /media/parkmino/rootfs/boot/uImage.orig
$ sudo mv /media/parkmino/rootfs/boot/uImage.e02 /media/parkmino/rootfs/boot/uImage
$ ls -al /media/parkmino/rootfs/boot
