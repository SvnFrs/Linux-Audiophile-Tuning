1. sudo nano /etc/rc.local

taskset 1-0-3-2-3 in place of 2-0-3-1-1

2. sudo nano /etc/rc.local

if [ "$(nproc --all)"=="4" ]; then
taskset -apc 0 `pgrep upmpdcli`
	if [ "$(($(chrt -ap `pgrep mpd` | wc -l)/2))"=="5" ]; then
	     sleep 5
	     MPD_PIDS=`chrt -ap $(pgrep -F /run/mpd/pid) | awk 'NR %2 == 0 {printf "%i\n",$2}'`
	     MAIN_PID=`echo "$MPD_PIDS" | awk 'NR == 1 {print}'`
	   UPDATE_PID=`echo "$MPD_PIDS" | awk 'NR == 2 {print}'`
	   PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 3 {print}'`
	  DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 4 {print}'`
	   OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 5 {print}'`
	     taskset -pc  1 "$MAIN_PID"
	     taskset -pc  0 "$UPDATE_PID"
	     taskset -pc  3 "$PLAYER_PID"
	     taskset -pc  2 "$DECODER_PID"
	     taskset -pc  3 "$OUTPUT_PID"
	 fi

	 if [ "$(($(chrt -ap `pgrep mpd` | wc -l)/2))"=="12" ]; then
	     sleep 10
	     MPD_PIDS=`chrt -ap $(pgrep -F /run/mpd/pid) | awk 'NR %2 == 0 {printf "%i\n",$2}'`
	    UPNP1_PID=`echo "$MPD_PIDS" | awk 'NR == 1  {print}'`
	    UPNP2_PID=`echo "$MPD_PIDS" | awk 'NR == 2  {print}'`
	    UPNP3_PID=`echo "$MPD_PIDS" | awk 'NR == 3  {print}'`
	    UPNP4_PID=`echo "$MPD_PIDS" | awk 'NR == 4  {print}'`
	    UPNP5_PID=`echo "$MPD_PIDS" | awk 'NR == 5  {print}'`
	    UPNP6_PID=`echo "$MPD_PIDS" | awk 'NR == 6  {print}'`
	    UPNP7_PID=`echo "$MPD_PIDS" | awk 'NR == 7  {print}'`
	    UPNP8_PID=`echo "$MPD_PIDS" | awk 'NR == 8  {print}'`
	    UPNP9_PID=`echo "$MPD_PIDS" | awk 'NR == 9  {print}'`
	   PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 10 {print}'`
	  DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 11 {print}'`
	   OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 12 {print}'`
	     taskset -pc  1 "$UPNP1_PID"
	     taskset -pc  1 "$UPNP2_PID"
	     taskset -pc  1 "$UPNP3_PID"
	     taskset -pc  1 "$UPNP4_PID"
	     taskset -pc  1 "$UPNP5_PID"
	     taskset -pc  0 "$UPNP6_PID"
	     taskset -pc  0 "$UPNP7_PID"
	     taskset -pc  0 "$UPNP8_PID"
	     taskset -pc  0 "$UPNP9_PID"
	     taskset -pc  3 "$PLAYER_PID"
	     taskset -pc  2 "$DECODER_PID"
	     taskset -pc  3 "$OUTPUT_PID"
	 fi
fi

chrt -aop 0 `pgrep -F /run/mpd/pid`
chrt -aip 0 `pgrep upmpdcli`
UPMPDCLI_PIDS=`chrt -ap $(pgrep upmpdcli) | awk 'NR %2 == 0 {printf "%i\n",$2}'`
for i in $UPMPDCLI_PIDS
 do
	ionice -c  3 -p $i
	renice -n 19 -p $i
 done

3. Comment out all the vm.* kernel configs.

4. sudo nano /usr/share/alsa/alsa.conf
	#pcm.shm.nonblock 1

5. sudo nano /etc/mpd.conf
	#always_on           "yes"
	#replay_gain_handler "none"

6. Same taskset in rygel
