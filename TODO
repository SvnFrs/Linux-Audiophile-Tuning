$ sudo cp /usr/share/alsa/alsa.conf.sav /dev/shm/alsa.conf
$ sudo ln -sf /dev/shm/alsa.conf /usr/share/alsa/alsa.conf
$ sudo cp /etc/mpd.conf.sav /dev/shm/mpd.conf && pkill mpd; sleep 1; mpd-bg
$ mpc listall | grep -m1 노력 | mpc add && mpc play $(mpc playlist | wc -l)

1. ALSA

	sudo sh -c "printf 'pcm.0.type hw pcm.0.card 0 pcm.0.device 0 pcm.0.subdevice 0' > /usr/share/alsa/alsa.conf.sav"
	sudo sh -c "printf 'pcm.0.type hw pcm.0.card 0 pcm.0.device 0 pcm.0.subdevice 0 defaults.pcm.minperiodtime 9' > /usr/share/alsa/alsa.conf.sav"
	sudo sh -c "printf 'pcm.0.type hw pcm.0.card 0 pcm.0.device 0 pcm.0.subdevice 0 defaults.pcm.minperiodtime 2757' > /usr/share/alsa/alsa.conf.sav"
	sudo sh -c "printf 'pcm.0.type hw pcm.0.card 0 pcm.0.device 0 pcm.0.subdevice 0 pcm.0.sync_ptr_ioctl 1 pcm.0.nonblock 1 defaults.pcm.minperiodtime 2757' > /usr/share/alsa/alsa.conf.sav"
	sudo sh -c "printf 'pcm.0.type hw pcm.0.card 0 pcm.0.device 0 pcm.0.subdevice 0 pcm.0.sync_ptr_ioctl 1 pcm.0.nonblock 1 defaults.pcm.minperiodtime 2757' > /usr/share/alsa/alsa.conf.sav"

	sudo cp /usr/share/alsa/alsa.conf.sav /dev/shm/alsa.conf

2. sudo nano /etc/mpd.conf.sav

	mixer_type "disabled"			# In/outside of ALSA output
	mixer_device "/dev/port"
	#gapless_mp3_playback "no"		# Remove this line
	#tags "no"				# Remove this line
	audio_buffer_size "3683"
	buffer_before_play "10.55969372980212839891001004021011%"
	audio_buffer_size "3684"		# for MPD 0.21

3. sudo nano /etc/sysctl.conf
	#vm.dirty_background_ratio = 0
	#vm.dirty_ratio = 0
	kernel.sched_min_granularity_ns = 229980
	kernel.sched_wakeup_granularity_ns = 388286
	kernel.sched_latency_ns = 1394058
	kernel.sched_migration_cost_ns = 4899005
	kernel.sched_shares_window = 345995
	kernel.sched_time_avg = 6289

4. Raspbian

	4.1 sudo systemctl status rc.local
	    sudo systemctl daemon-reload

	4.2 wget http://archive.raspbian.org/raspbian/pool/main/s/shairport-sync/shairport-sync_3.2.1-1_armhf.deb
	    sudo dpkg -i shairport*.deb

	4.3 Update kr2mpd
		sudo apt-get install python-crypto

	4.4 echo noop | tee /sys/block/mmcblk0*/queue/scheduler (rc.local)

	4.5 Typo pcm.o -> pcm.0, sudevice -> subdevice (alsa.conf.roon)

	4.6 taskset !~ /systemd$/ (rc.local)

	4.7 comment out vm.dirty_background_ratio & vm.dirty_ratio (sysctl.conf)

	4.8 nohup ...>/dev/null</dev/null 2>/dev/null

	4.9 cat /proc/sys/kernel/printk
		nano /etc/sysctl.conf
			kernel.printk = 0 0 0 0
			kernel.watchdog = 0
			kernel.watchdog_thresh = 0 # Only for Ubuntu & Orange Pi Zero for Armbian/Deitpi

	4.10 sudo sed -i '/^#/d' /etc/mpd.conf.sav
		#dop
		#music_directory
		#metadata

	4.11 sudo nano /etc/mpd.conf.sav
		input {
		plugin "mms"
		enabled "no"
		}
		#playlist_plugin {
		#name "extm3u"
		#enabled "no"
		#}
		#playlist_plugin {
		#name "xspf"
		#enabled "no"
		#}
		#decoder {
		#plugin "oggflac"
		#enabled "no"
		#}
		playlist_plugin {
		name "flac"
		enabled "no"
		}

	4.12 Disble load balancing
		echo 0 | sudo tee /sys/fs/cgroup/cpuset/cpuset.sched_load_balance
		sudo sh -c "echo 0 > /sys/fs/cgroup/cpuset/cpuset.sched_load_balance"

	4.13 Enable memory hardwall
		#echo 1 | sudo tee /sys/fs/cgroup/cpuset/cpuset.mem_hardwall
		#sudo sh -c "echo 1 > /sys/fs/cgroup/cpuset/cpuset.mem_hardwall"

	4.14 /dev/snd
		ls -al /dev/snd/
		sudo rm /dev/snd/*D[1-9]* /dev/snd/*c /dev/snd/hw* /dev/snd/seq /dev/snd/timer # /dev/snd/control*
		sudo nano /etc/rc.local
			rm /dev/snd/*c /dev/snd/hw* /dev/snd/seq /dev/snd/timer || true # /dev/snd/*C0* /dev/snd/*D[1-9]*
			for i in $(ls /dev/snd/); do
				[ ! "$i" = "by-id"  ] && [ ! "$i" = "by-path"  ] && [ ! "$i" = "pcmC0D0p"  ] && [ ! "$i" = "controlC0"  ] && rm -f "/dev/snd/$i"
			done

	4.15 CPU Ondemand governor configuration options
		$ sudo nano /etc/rc.local
			echo 1000000 > /sys/devices/system/cpu/cpufreq/ondemand/sampling_rate		# 1-1000000
			echo 1 > /sys/devices/system/cpu/cpufreq/ondemand/ignore_nice_load		# 0
			echo 100 > /sys/devices/system/cpu/cpufreq/ondemand/sampling_down_factor	# 1
			#echo 40 > /sys/devices/system/cpu/cpufreq/ondemand/up_threshold		# 95
			#echo 1 > /sys/devices/system/cpu/cpufreq/ondemand/io_is_busy			# 1

	4.16 Customized mixer
		$ sudo nano /etc/rc.local
			mknod -m 000 /dev/mixer c 1 2 && chown root:kmem /dev/mixer
		$ sudo nano /etc/mpd.conf.sav
			mixer_device "/dev/mixer"
