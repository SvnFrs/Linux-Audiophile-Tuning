1. sudo nano /etc/rc.local

low_pri () {
 chrt -v -ip 0 $1
 renice  19 -p $1
 ionice -c3 -p $1
}

until [ $(pgrep -x mpd) -gt 0 ] 2>/dev/null && $(pstree -np $(pgrep -x mpd) | grep -q output); do
 sleep 1
done

pgr_mpd=$(pgrep -x mpd)

taskset -pc 0 $pgr_mpd
chrt -v -ip 0 $pgr_mpd
renice  18 -p $pgr_mpd
ionice -c3 -p $pgr_mpd

echo "$(pstree -np $pgr_mpd)" | while read line ; do
    proc=$(echo "$line" | cut -d "{" -f2 | cut -d "}" -f1 | cut -d ":" -f1)
 proc_nr=$(echo "$line" | cut -d "}" -f2 | cut -d "(" -f2 | cut -d ")" -f1)
 case $proc in
  mpd|io)	taskset -cp 0 $proc_nr
		low_pri       $proc_nr ;;
  player)	taskset -cp 1 $proc_nr
		chrt -v -ip 0 $proc_nr
		renice  17 -p $proc_nr ;;
  decoder)	taskset -cp 2 $proc_nr
		chrt -v -ip 0 $proc_nr
		renice  16 -p $proc_nr ;;
  output)	taskset -cp 3 $proc_nr
		chrt -v -op 0 $proc_nr ;;
 esac
done
