1. sudo nano /etc/rc.local

	if [ "$(nproc --all)" = '4' ]
	then
		sleep 5
		MPD_PID=`pgrep -F /run/mpd/pid`
		MPD_PIDS=`chrt -ap "$MPD_PID" | awk 'NR %2 == 0 {printf "%i\n",$2}'`
		     MAIN_PID=`echo "$MPD_PIDS" | awk 'NR == 1 {print}'`
		   UPDATE_PID=`echo "$MPD_PIDS" | awk 'NR == 2 {print}'`
		   PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 3 {print}'`
		  DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 4 {print}'`
		   OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 5 {print}'`
		taskset -pc 1 "$MAIN_PID"
		taskset -pc 0 "$UPDATE_PID"
		taskset -pc 3 "$PLAYER_PID"
		taskset -pc 1 "$DECODER_PID"
		taskset -pc 2 "$OUTPUT_PID"
		taskset -apc 0 `pgrep upmpdcli`
	fi

	chrt    -api 0 `pgrep upmpdcli`

	#sysctl -w debug.exception-trace=0
	#sysctl -w kernel.watchdog=0
	#sysctl -w kernel.sched_rt_runtime_us=-1
	#sysctl -w kernel.sched_rt_period_us=42700
	 sysctl -w kernel.printk='4 4 1 4'
	#sysctl -w vm.swappiness=30
	 sysctl -w vm.overcommit_memory=1
	#sysctl -w vm.overcommit_ratio=0
	 sysctl -w vm.dirty_writeback_centisecs=0
	 sysctl -w vm.oom_dump_tasks=0
	 sysctl -w vm.oom_kill_allocating_task=1
	 sysctl -w vm.panic_on_oom=2
	 sysctl -w vm.stat_interval=3
	#sysctl -w vm.user_reserve_kbytes=0
	
	#PIDS=`ps h -eo pid,class,comm | awk '$3 !~ /mpd/ && $3 !~ /snd/ && $3 !~ /irq/ && $3 !~ /audio/ {print $1}'`
	#for PID in ${PIDS}
	#do
	#    taskset -acp 0-1 ${PID} || /bin/true
	#done

2. sudo nano /etc/fstab

	tmpfs /tmp       tmpfs nosuid,nodev,noatime,nodiratime 0 0
	tmpfs /var/cache tmpfs nosuid,nodev,noatime,nodiratime 0 0


3. mplayer --novideo

4. sudo nano /etc/rc.local

    MPD_PID=`pgrep -n mpd`

   MPD_PIDS=`chrt -ap "$MPD_PID" | awk 'NR %2 == 0 {printf "%i\n",$2}'`
      LINES=$(expr $(chrt -ap "$MPD_PID" | wc -l) / 2)
   
   if (( "$(nproc --all)"=="4" && "$LINES"=="5" ))
   then
	     MAIN_PID=`echo "$MPD_PIDS" | awk 'NR == 1 {print}'`
	   UPDATE_PID=`echo "$MPD_PIDS" | awk 'NR == 2 {print}'`
	   PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 3 {print}'`
	  DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 4 {print}'`
	   OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 5 {print}'`
	     chrt    -apo 0 "$MPD_PID"
	     taskset -pc  1 "$MAIN_PID"
	     taskset -pc  0 "$UPDATE_PID"
	     taskset -pc  3 "$PLAYER_PID"
	     taskset -pc  1 "$DECODER_PID"
	     taskset -pc  2 "$OUTPUT_PID"
   fi

   if (( "$(nproc --all)"=="4" && "$LINES"=="12" ))
   then
	    UPNP1_PID=`echo "$MPD_PIDS" | awk 'NR == 1  {print}'`
	    UPNP2_PID=`echo "$MPD_PIDS" | awk 'NR == 2  {print}'`
	    UPNP3_PID=`echo "$MPD_PIDS" | awk 'NR == 3  {print}'`
	    UPNP4_PID=`echo "$MPD_PIDS" | awk 'NR == 4  {print}'`
	    UPNP5_PID=`echo "$MPD_PIDS" | awk 'NR == 5  {print}'`
	    UPNP6_PID=`echo "$MPD_PIDS" | awk 'NR == 6  {print}'`
	    UPNP7_PID=`echo "$MPD_PIDS" | awk 'NR == 7  {print}'`
	    UPNP8_PID=`echo "$MPD_PIDS" | awk 'NR == 8  {print}'`
	    UPNP9_PID=`echo "$MPD_PIDS" | awk 'NR == 9  {print}'`
	   PLAYER_PID=`echo "$MPD_PIDS" | awk 'NR == 10 {print}'`
	  DECODER_PID=`echo "$MPD_PIDS" | awk 'NR == 11 {print}'`
	   OUTPUT_PID=`echo "$MPD_PIDS" | awk 'NR == 12 {print}'`
	     chrt    -apo 0 "$MPD_PID"
	     taskset -pc  0 "$UPNP1_PID"
	     taskset -pc  0 "$UPNP2_PID"
	     taskset -pc  0 "$UPNP3_PID"
	     taskset -pc  0 "$UPNP4_PID"
	     taskset -pc  0 "$UPNP5_PID"
	     taskset -pc  0 "$UPNP6_PID"
	     taskset -pc  0 "$UPNP7_PID"
	     taskset -pc  0 "$UPNP8_PID"
	     taskset -pc  0 "$UPNP9_PID"
	     taskset -pc  3 "$PLAYER_PID"
	     taskset -pc  1 "$DECODER_PID"
	     taskset -pc  2 "$OUTPUT_PID"
   fi
