1. sudo apt-get install psmisc
   sudo nano /etc/rc.local
	sleep 7
	taskset -acp 0-1 `pgrep -x kodi.bin`
	FDE_PID=$(pstree -np `pgrep kodi.bin` | grep FDE      | grep -o '[0-9]*' | sed $
	AAE_PID=$(pstree -np `pgrep kodi.bin` | grep ActiveAE | grep -o '[0-9]*')
	AES_PID=$(pstree -np `pgrep kodi.bin` | grep AESink   | grep -o '[0-9]*')
	CEC_PID=$(pstree -np `pgrep kodi.bin` | grep CEC      | grep -o '[0-9]*')
	USB_PID=$(pstree -np `pgrep kodi.bin` | grep USB      | grep -o '[0-9]*')
	DVD_PID=$(pstree -np `pgrep kodi.bin` | grep DVD      | grep -o '[0-9]*')
	TIM_PID=$(pstree -np `pgrep kodi.bin` | grep Timer    | grep -o '[0-9]*')
	taskset -cp  2 "$AES_PID"
	taskset -cp  3 "$AAE_PID"
	for i in "$FDE_PID" "$CEC_PID" "$USB_PID" "$DVD_PID" "$TIM_PID"
	do
	 ionice -c 3  -p $i
	 renice -n 19 -p $i
	done

2. sudo nano /etc/rc.local
	if [ "$(nproc --all)" = "4" ]; then
	 sleep 5
	 taskset -apc 0 `pgrep upmpdcli`
	 MPD_PID=`pgrep -F /run/mpd/pid`
	  if [ "$(($(chrt -ap "$MPD_PID" | wc -l)/2))" != "5" ]; then
	  sleep 5
	  fi
	 taskset -acp 1 "$MPD_PID"
	 taskset -pc  0 $(pstree -np "$MPD_PID" | grep io      | grep -o '[0-9]*' | tail -n1)
	 chrt    -ip  0 $(pstree -np "$MPD_PID" | grep io      | grep -o '[0-9]*' | tail -n1)
	 taskset -pc  3 $(pstree -np "$MPD_PID" | grep player  | grep -o '[0-9]*')
	 taskset -pc  2 $(pstree -np "$MPD_PID" | grep decoder | grep -o '[0-9]*')
	 taskset -pc  3 $(pstree -np "$MPD_PID" | grep output  | grep -o '[0-9]*')
	fi

3. sudo nano /boot/cmdline.txt
	selinux=0
	dwc_otg.fiq_split_enable=0 dwc_otg.fiq_fix_enable=0
	dwc_otg.fiq_enable=1 dwc_otg.fiq_fsm_enable=1 dwc_otg.fiq_fsm_mask=0x3
	dwc_otg.fiq_fsm_enable=0

4. USB Tweak
	https://www.raspberrypi.org/forums/viewtopic.php?f=29&t=93463
	https://github.com/codazoda/hub-ctrl.c
		wget https://github.com/codazoda/hub-ctrl.c/blob/master/hub-ctrl.c
		sudo apt-get install libusb-dev
		gcc -o hub-ctrl hub-ctrl.c -lusb
		# For self-powered USB DAC
		sudo ./hub-ctrl -h 0 -P 2 -p 0
		# For external-powered USB DAC
		sudo ./hub-ctrl -h 0 -P 2 -p 0
		sleep 3
		sudo ./hub-ctrl -h 0 -P 5 -p 1
		# Edit /etc/rc.local
		sudo nano /etc/rc.local

	/devices/platform/bcm2708_usb/usb1/1-1/1-1.2/
	/devices/platform/bcm2708_usb/usb1/1-1/1-1.3/
	/sys/bus/usb/devices/
	find / -iname bcm2708_usb
	echo -n "1-1.2:1.0" > /sys/bus/usb/drivers/usbhid/unbind
	echo -n "1-1.3:1.0" > /sys/bus/usb/drivers/usbhid/unbind
