1. Artik

1.1 Sound (sharp-balanced-warm)

    # nano /etd/default/audio.conf
    	sound=balanced
    # nano /usr/bin/consf
    # nano /usr/bin/audioconf
    # for i in $(grep -o ' [0-9]*:' /proc/interrupts | tr -d ' ' | tr -d ':'); do grep "^ *${i}:" /proc/interrupts; cat /proc/irq/$i/smp_affinity; done

    # nano /etc/rc.local

	procnr=$(nproc --all)
	if   [ "$procnr" -eq 2 ]; then
	 m_task=0; s_task=1; h_task=1; o_task=1
	elif [ "$procnr" -eq 4 ]; then
	 m_task=2; s_task=0; h_task=3; o_task=1
	elif [ "$procnr" -ge 8 ]; then
	 m_task=6; s_task=4; h_task=2; o_task=0,1,3,5,7
	else
	 m_task=0; s_task=0; h_task=0; o_task=0
	fi
	
	### Taskset
	if   [ "$sound" = sharp ]; then
	 for i in $(awk '/spi|watchdog|tmuctrl|vip0|hdmi/{print +$1}' /proc/interrupts); do
	  echo "3F" > /proc/irq/$i/smp_affinity
	 done
	elif [ "$sound" = warm ]; then
	 for i in $(awk '/hdmi|Mali/{print +$1}' /proc/interrupts); do
	  echo "3F" > /proc/irq/$i/smp_affinity
	 done
	fi

	for i in $(awk '/Event Timer IRQ/{print +$1}' /proc/interrupts); do
	 echo "FF" > /proc/irq/$i/smp_affinity
	done	
	for i in $(awk '/eth/{print +$1}' /proc/interrupts); do
	 echo "10" > /proc/irq/$i/smp_affinity
	done
	for i in $(awk '/hci/{print +$1}' /proc/interrupts); do
	 echo "40" > /proc/irq/$i/smp_affinity
	done
	echo "10" > /proc/irq/default_smp_affinity
	for pid in 1 $(pgrep -x rc.local); do
	 taskset -cp $s_task $pid || true
	done
	
	for i in RoonBridge librespot networkaudiod; do
	 if [ $m_task -gt $s_task ] && [ ! -z $(pidof $i) ]; then
	  taskset -acp 0-$procnr $(pidof $i) || true # $s_task
	 fi
	done

1.2 Build number

	# nano /usr/bin/consf
	# nano /usr/bin/audioconf
	# rm /root/release
	# echo "* Bann Sylphid Network Player $(date +"%y%m%d")" > /etc/release

2. ALSA 1.2.4 => Stay with 1.2.3.1

3. MPD

	# nano /etc/rc.local
		#taskset -pc $s_task,$h_task,$o_task $pgr_mpd
		   mpd)		 taskset -cp $s_task,$h_task,$o_task	$proc_nr ;;
		   io)		 taskset -cp $s_task,$h_task,$o_task	$proc_nr ;;
		   rtio)	 taskset -cp $s_task,$h_task,$o_task	$proc_nr
				 chrt -opv 0         			$proc_nr ;;
		# player)	 taskset -cp $s_task,$h_task,$o_task	$proc_nr ;;
		# decoder)	 taskset -cp $s_task,$h_task,$o_task	$proc_nr ;;
		  output)	 taskset -cp $m_task			$proc_nr
				 chrt -opv 0				$proc_nr ;;
		...
		#for pid in $(ps -eo pid,comm | awk '$2 !~ /systemd$|lightdm|sawfish|mpd/ {print $1}'); do
		# taskset -acp $s_task,$h_task,$o_task $pid 2>/dev/null || true
		#done
		...
		#for pid in 1 $(pgrep -x rc.local); do
		# taskset -cp $s_task $pid || true
		#done
	##nano /etc/mpd.conf.sav
		audio_buffer_size "3683"
		buffer_before_play "10.559693729803665754847%"
	# nano /etc/mpd.conf.sav
		audio_buffer_size "3684"
		buffer_before_play "9.9999039%"

4. Shell redirection

	>/dev/null</dev/null 2>/dev/null => 1</dev/null 2</dev/null 0</dev/null

5. Update Upmpdcli 1.5.5 => Stay with 1.4.14

6. Update myMPD 6.9.0

	# dpkg -i copy/mympd_6.9.0-1_arm64.deb
	# mv copy/*.png /var/lib/mympd/pics/
	# mv copy/*.lua /var/lib/mympd/scripts/
	# nano /etc/mympd.conf
	# mympd

7. hdparm

	# /etc/hdparm.conf
		read_ahead_sect = 1928
	# hdparm -a1928 /dev/sda

